<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>keystart</title>
  <link rel="stylesheet" href="css/style.css" />
  <link rel="stylesheet" href="css/mobilestyle.css" />
  <script src="https://t1.kakaocdn.net/kakao_js_sdk/2.6.0/kakao.min.js"
    integrity="sha384-6MFdIr0zOira1CHQkedUqJVql0YtcZA1P0nbPrQYJXVJZUkTk/oX4U9GhUIs3/z8"
    crossorigin="anonymous"></script>
  <script>
    // SDK를 초기화 합니다. 사용할 앱의 JavaScript 키를 설정해야 합니다.
    Kakao.init('013f85c8b0af765c637ee6e286ce0cb1');

    // SDK 초기화 여부를 판단합니다.
    console.log(Kakao.isInitialized());
  </script>
</head>

<body>
  <div id="wrapper">
    <div>
      <img src="./img/addPagePlaceHolder1.png" alt="홍보 섹션 1" />
      <div class="addSpacer"></div>
    </div>

    <div class="info-section">
      <h1 class="section-title">창업준비, 왜 키스타트일까요?</h1>
      <div class="info-boxes">
        <div class="info-box">
          <div class="box-icon">
            <img src="./img/callChat.png" alt="상담원" />
          </div>
          <div class="box-text">
            전문적인 1:1상담으로<br />개인 맞춤 창업 컨설팅
          </div>
        </div>
        <div class="info-box">
          <div class="box-icon">
            <img src="./img/callTalk.png" alt="챗봇" />
          </div>
          <div class="box-text">
            창업 관련 정보<br />주기적인 제공 및 무료강의
          </div>
        </div>
        <div class="info-box">
          <div class="box-icon">
            <img src="./img/callList.png" alt="리스트" />
          </div>
          <div class="box-text">
            창업 비용은 최소예산으로<br />맞춤형 업체 추천
          </div>
        </div>
      </div>
      <div class="addSpacer"></div>
    </div>

    <div>
      <img src="./img/addPagePlaceHolder3.png" alt="홍보 섹션 3" />
      <div class="addSpacer"></div>
    </div>

    <div>
      <img src="./img/addPagePlaceHolder4.png" alt="홍보 섹션 4" />
      <div class="addSpacer"></div>
    </div>

    <div>
      <img src="./img/addPagePlaceHolder5.png" alt="홍보 섹션 5" />
      <div class="addSpacer"></div>
    </div>

    <div>
      <img src="./img/addPagePlaceHolder6.png" alt="홍보 섹션 6" />
    </div>
  </div>

  <div class="together">키스타트와 함께하는 파트너사</div>

  <div class="wrap">
    <!-- 배너표시영역 -->
    <div class="rolling-list">
      <!-- 원본배너 -->
      <ul>
        <li>
          <div class="image-wrap">
            <img src="./img/collabo/shuiiing.png" alt="" />
          </div>
        </li>
        <li>
          <div class="image-wrap">
            <img src="./img/collabo/starTrans.png" alt="" />
          </div>
        </li>
        <li>
          <div class="image-wrap">
            <img src="./img/collabo/daflim.png" alt="" />
          </div>
        </li>
        <li>
          <div class="image-wrap">
            <img src="./img/collabo/space.png" alt="" />
          </div>
        </li>
        <li>
          <div class="image-wrap">
            <img src="./img/collabo/datos.png" alt="" />
          </div>
        </li>
        <li>
          <div class="image-wrap">
            <img src="./img/collabo/cook.png" alt="" />
          </div>
        </li>
        <li>
          <div class="image-wrap">
            <img src="./img/collabo/sibsamwol.png" alt="" />
          </div>
        </li>
        <li>
          <div class="image-wrap">
            <img src="./img/collabo/protectAsse.png" alt="" />
          </div>
        </li>
      </ul>
    </div>
  </div>

  <div class="footer">
    <div class="footer-left">
      <div class="logo">
        <img class="logo-img" src="./img/logoWhite.png" alt="로고" />
      </div>
      <div class="links">
        <div class="footer-link">이용약관</div>
        <div class="separator">ㅣ</div>
        <div class="footer-link">개인정보 처리방침</div>
      </div>
      <div class="contact-info">
        <div class="info-item">
          <span class="label title">상호명</span>
          <span class="value">키스타트</span>
          <span class="label title"> | </span>
          <span class="label title">주소</span>
          <span class="value">울산광역시 중구 운곡8길 82-2, 201호(다운동)</span>
        </div>
        <div class="info-item">
          <span class="label title">사업자등록번호</span>
          <span class="value">607-79-00239
            <a href="#" class="business-info-link">[사업자 정보 확인]</a></span>
        </div>
        <div class="info-item">
          <span class="label title">E-MAIL</span>
          <span class="value">keystart.official@keystart.co.kr</span>
          <span class="label title"> | </span>
          <span class="label title">TEL</span>
          <span class="value">010-9043-9908</span>
        </div>
      </div>
    </div>
  </div>

  <div class="fixed-button-container">
    <div class="Button" id="login-button" onclick="login()">
      <div>로그인하기</div>
    </div>
    <div class="Button" id="kakao-button" onclick="kakaoLogin()">
      <div class="Inner">
        <div class="icon">
          <img src="./img/kakao_logo.png" class="logo-back" alt="kakao logo" />
        </div>
        <div>카카오로 1초만에 가입</div>
      </div>
    </div>
    <script>
      async function login() {
        try {
          const response = await fetch(
            //개발
            //"http://localhost:8282/api/v1/user/kakaologincode",
            //배포
            "https://www.keystart.co.kr/api/v1/user/kakaologincode",
            { method: "GET", credentials: "include" }
          );

          const data = await response.json();
          if (data.error) {
            alert('사용자를 찾을 수 없습니다.');
          }

          window.location.href = data.url; // 카카오 로그인 페이지로 리다이렉트
        } catch (error) {
          console.error("카카오 로그인 URL을 가져오는 데 실패했습니다.", error);
        }
      }

      function kakaoLogin() {
        Kakao.Auth.authorize({
           redirectUri: 'http://127.0.0.1:5500/keystart.html',
          //redirectUri: 'https://www.keystart.co.kr/keystart.html',
        });
      }

      // 페이지 로드 시 인가 코드 확인 및 처리
      window.onload = async function () {
        const code = new URLSearchParams(window.location.search).get('code');

        if (code) {
          // 서버에 인가 코드를 전송
          fetch(
             //'http://localhost:8282/api/v1/user/kakao/callback',
            'https://www.keystart.co.kr/api/v1/user/kakao/callback',
            {
              // YOUR_SERVER_ENDPOINT를 서버의 엔드포인트 주소로 변경해주세요.
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
              },
              body: JSON.stringify({ code }),
            })
            .then((response) => response.json())
            .then((data) => {
              console.log('Success:', data);
              localStorage.setItem('jwtToken', data.token)
              console.log(localStorage.getItem('jwtToken'));
              location.href = data.redirectUrl;
            })
            .catch((error) => {
              console.error('Error:', error);
            });
        }
      };

      // 원본과 두 개의 복제본 생성
      let roller1 = document.querySelector(".rolling-list");
      roller1.id = "roller1"; // 아이디 부여

      let clone1 = roller1.cloneNode(true);
      clone1.id = "roller2";
      document.querySelector(".wrap").appendChild(clone1);

      let clone2 = roller1.cloneNode(true);
      clone2.id = "roller3";
      document.querySelector(".wrap").appendChild(clone2);

      let clone3 = roller1.cloneNode(true);
      clone3.id = "roller4";
      document.querySelector(".wrap").appendChild(clone3);

      // 모든 리스트에 대해 클래스 추가하여 애니메이션 시작
      document.querySelector("#roller1").classList.add("original");
      document.querySelector("#roller2").classList.add("clone");
      document.querySelector("#roller3").classList.add("clone");
      document.querySelector("#roller4").classList.add("clone");
    </script>
</body>

</html>