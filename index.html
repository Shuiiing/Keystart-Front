<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>키스타트</title>
  <link rel="stylesheet" href="./css/style.css" />
  <link rel="stylesheet" href="./css/mobilestyle.css" />
  <link rel="stylesheet" href="https://unpkg.com/ress/dist/ress.min.css">
</head>

<body>
  <header id="header"></header>

  <label class="checkbox" hidden>
    <input type="checkbox" id="overflow" checked /> Hide image overflow
  </label>
  <div class="container">
    <div class="carousel-viewport">
      <ul class="items">
        <li class="item">
          <img src="./img/banner/blue-main-banner.png" width="1920" height="900" alt="" />
        </li>
        <li class="item">
          <img src="./img/banner/white-main-banner.png" width="1920" height="900" alt="" />
        </li>
        <li class="item">
          <img src="./img/banner/shine-main-banner.png" width="1920" height="900" alt="" />
        </li>
      </ul>
    </div>
    <button class="carousel-control prev" title="Go to previous item">
      <svg viewBox="0 0 256 512">
        <path
          d="M31.7 239l136-136c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9L127.9 256l96.4 96.4c9.4 9.4 9.4 24.6 0 33.9L201.7 409c-9.4 9.4-24.6 9.4-33.9 0l-136-136c-9.5-9.4-9.5-24.6-.1-34z" />
      </svg>
    </button>
    <button class="carousel-control next" title="Go to next item">
      <svg viewBox="0 0 256 512">
        <path
          d="M224.3 273l-136 136c-9.4 9.4-24.6 9.4-33.9 0l-22.6-22.6c-9.4-9.4-9.4-24.6 0-33.9l96.4-96.4-96.4-96.4c-9.4-9.4-9.4-24.6 0-33.9L54.3 103c9.4-9.4 24.6-9.4 33.9 0l136 136c9.5 9.4 9.5 24.6.1 34z" />
      </svg>
    </button>
    <ol class="carousel-dots">
      <li class="dot active"></li>
      <li class="dot"></li>
      <li class="dot"></li>
    </ol>
  </div>

  <div class="spacer"></div>
  <img src="./img/mainPlaceHolder2.png" alt="키스타트 이미지" />
  <div class="spacer"></div>
  <img src="./img/mainPlaceHolder3.png" alt="키스타트 이미지" />
  <div class="spacer"></div>
  <img src="./img/main-change.png" alt="키스타트 이미지" />
  <div class="spacer"></div>

  <div class="faq-container">
    <div class="requestion">자주 묻는 질문</div>
    <div class="faq-item">
      <button class="faq-question">
        창업을 시작하려는데 어떤 서비스를 이용할 수 있나요?<span class="arrow"></span>
      </button>
      <div class="faq-answer">"키스타트에서는 창업에 필요한 인테리어, 디자인, 시공, 보안, 통신, 자재, 마케팅 등의 서비스를 제공합니다. 고객님의 요구사항을 파악하여 필요한 서비스를
        제안하고, 창업 과정을 전반적으로 지원합니다."</div>
    </div>

    <div class="faq-item">
      <button class="faq-question">
        고정비용을 줄일 수 있는 방법이 있나요?<span class="arrow"></span>
      </button>
      <div class="faq-answer">"저희는 고객의 업종과 규모에 맞게 고정비 항목을 분석하여 낭비되는 부분을 찾아냅니다. 그리고 이를 줄일 수 있는 맞춤형 절감 방안을 제공하여 고정비용을
        효율적으로 관리할 수 있도록 도와드립니다."</div>
    </div>

    <div class="faq-item">
      <button class="faq-question">
        자재와 부자재 비용을 어떻게 줄일 수 있나요?<span class="arrow"></span>
      </button>
      <div class="faq-answer">"키스타트는 경쟁력 있는 가격의 자재와 부자재를 공급할 수 있는 네트워크를 활용하여 비용을 절감합니다. 또한, 고객의 사업에 적합한 자재 구매 계획을 세워 비용
        절약과 효율적인 자재 관리를 지원합니다."</div>
    </div>

    <div class="faq-item">
      <button class="faq-question">
        특정 서비스만 선택해서 이용할 수 있나요?<span class="arrow"></span>
      </button>
      <div class="faq-answer">"네, 가능합니다. 고객님께서는 키스타트가 제공하는 다양한 서비스 중에서 필요하고 원하는 서비스만을 선택하여 이용하실 수 있습니다."</div>
    </div>

    <div class="faq-item">
      <button class="faq-question">
        제가 직접 처리할 수 있는 부분이 있어요. 그 외의 서비스만 받을 수 있나요?<span class="arrow"></span>
      </button>
      <div class="faq-answer">"물론입니다. 고객님이 직접 처리하기로 한 부분을 제외하고, 나머지 필요한 서비스에 대해서만 지원을 받을 수 있습니다. 키스타트는 고객님의 창업을 원활하게
        만들어드리기 위해 유연하게 서비스를 조정합니다."</div>
    </div>
  </div>

  <div class="more-info">
    <img src="./img/button.png" alt="" />
  </div>

  <div class="together">키스타트와 함께하는 파트너사</div>
  <div class="wrap">
    <!-- 배너표시영역 -->
    <div class="rolling-list">
      <!-- 원본배너 -->
      <ul>
        <li>
          <div class="image-wrap">
            <img src="./img/collabo/food_pang.png" alt="" />
          </div>
        </li>
        <li>
          <div class="image-wrap">
            <img src="./img/collabo/back_ya.png" alt="" />
          </div>
        </li>
        <li>
          <div class="image-wrap">
            <img src="./img/collabo/rental_on.png" alt="" />
          </div>
        </li>
        <li>
          <div class="image-wrap">
            <img src="./img/collabo/shuiiing.png" alt="" />
          </div>
        </li>
        <li>
          <div class="image-wrap">
            <img src="./img/collabo/star_transfer.png" alt="" />
          </div>
        </li>
        <li>
          <div class="image-wrap">
            <img src="./img/collabo/daelim.png" alt="" />
          </div>
        </li>
        <li>
          <div class="image-wrap">
            <img src="./img/collabo/space.png" alt="" />
          </div>
        </li>
        <li>
          <div class="image-wrap">
            <img src="./img/collabo/mater_in.png" alt="" />
          </div>
        </li>
        <li>
          <div class="image-wrap">
            <img src="./img/collabo/datos.png" alt="" />
          </div>
        </li>
        <li>
          <div class="image-wrap">
            <img src="./img/collabo/golden-master.png" alt="" />
          </div>
        </li>
        <li>
          <div class="image-wrap">
            <img src="./img/collabo/cook.png" alt="" />
          </div>
        </li>
        <li>
          <div class="image-wrap">
            <img src="./img/collabo/sibsamwol.png" alt="" />
          </div>
        </li>
        <li>
          <div class="image-wrap">
            <img src="./img/collabo/hadong.png" alt="" />
          </div>
        </li>
        <li>
          <div class="image-wrap">
            <img src="./img/collabo/protect_asset.png" alt="" />
          </div>
        </li>
      </ul>
    </div>
  </div>
  <img src="./img/mainPlaceHolder6.png" alt="키스타트 이미지" />
  <footer id="footer"></footer>

  <!-- 헤더 및 풋터 스크립트 -->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
  <script src="jquery.bxslider/jquery.bxslider.js"></script>

  <script src="./layout/header.js"></script>
  <script src="./layout/footer.js"></script>
  <script>

    async function fetchUserInfo() {
      try {
        // localStorage에서 토큰을 가져옵니다.
        const token = localStorage.getItem("accessToken");
        if (!token) {
          console.log("토큰이 없습니다. 로그인이 필요합니다.");
          return;
        }

        const response = await fetch(
          // "http://localhost:8282/api/v1/user/info",
          "https://www.keystart.co.kr/api/v1/user/info",
          {
            method: "GET",
            headers: {
              Authorization: `Bearer ${token}`,
            },
          }
        );

        if (!response.ok) {
          throw new Error("사용자 정보를 불러오는데 실패했습니다.");
        }

        const data = await response.json();
        console.log("사용자 정보:", data); // 콘솔에 사용자 정보 출력
      } catch (error) {
        console.error("사용자 정보 요청 중 오류 발생:", error);
      }
    }
    window.onload = function () {
      const token = localStorage.getItem("accessToken");

      if (!token) {
        window.location.href = "/keystart.html";
        alert("로그인을 해주세요.");
      } else {
        fetchUserInfo();
      }
    };

    window.addEventListener("scroll", function () {
      var navbar = document.querySelector(".TopNav");
      var logoImg = document.querySelector(".logo-top img");

      if (window.scrollY > 0) {
        navbar.classList.add("scrolled");
        logoImg.src = "./img/logo/logoBlack.png"; // 스크롤 시 검정색 로고로 변경
      } else {
        navbar.classList.remove("scrolled");
        logoImg.src = "./img/logo/top-white-logo.png"; // 스크롤을 올릴 때는 흰색 로고로 변경
      }
    });




    var ht = null;
    (function (id, scriptSrc, callback) {
      var d = document,
        tagName = "script",
        $script = d.createElement(tagName),
        $element = d.getElementsByTagName(tagName)[0];
      $script.id = id;
      $script.async = true;
      $script.src = scriptSrc;
      if (callback) {
        $script.addEventListener(
          "load",
          function (e) {
            callback(null, e);
          },
          false
        );
      }
      $element.parentNode.insertBefore($script, $element);
    })(
      "happytalkSDK",
      "https://chat-static.happytalkio.com/sdk/happytalk.chat.v2.min.js",
      function () {
        ht = new Happytalk({
          siteId: "4000003356",
          siteName: "키스타트",
          categoryId: "177791",
          divisionId: "177792",
          kakaoId: "@keystart",
        });
      }
    );

    // ------------------ 슬라이더관련 스크립트코드 -------------------
    /* Overflow toggle */
    const hideOverflow = document.getElementById("overflow");

    hideOverflow.addEventListener("click", () => {
      document.querySelector(".container").style.overflow =
        hideOverflow.checked ? "hidden" : "visible";
    });

    /* Carousel */
    const items = document.querySelector(".items");
    const dots = document.querySelectorAll(".dot");
    const prev = document.querySelector(".prev");
    const next = document.querySelector(".next");
    const total = items.children.length - 1;
    const active = "active";
    let current = 0;
    let interval; // 변수 추가: setInterval을 저장할 변수
    let isAutoScrollEnabled = true; // 자동 슬라이딩 상태를 나타내는 변수

    const setActiveDot = () => {
      dots.forEach((button, i) => {
        i === current
          ? button.classList.add(active)
          : button.classList.remove(active);
      });
    };

    const scrollToCurrent = () => {
      items.style.transform = `translateX(${current * -100}%)`;
      setActiveDot();
    };

    const scrollPrev = () => {
      if (current === 0) return;
      current--;
      scrollToCurrent();
      stopAutoScroll(); // 이전 버튼 클릭 시 자동 슬라이딩 중지
    };

    const scrollNext = () => {
      if (current === total) return;
      current++;
      scrollToCurrent();
      stopAutoScroll(); // 다음 버튼 클릭 시 자동 슬라이딩 중지
    };

    const startAutoScroll = () => {
      if (isAutoScrollEnabled) {
        interval = setInterval(() => {
          if (current === total) {
            current = 0;
          } else {
            current++;
          }
          scrollToCurrent();
        }, 3000); // 3초마다 슬라이더 넘김
      }
    };

    const stopAutoScroll = () => {
      clearInterval(interval); // setInterval 중지
      isAutoScrollEnabled = false; // 자동 슬라이딩 중지 상태로 설정
    };

    prev.addEventListener("click", () => {
      scrollPrev();
      startAutoScroll(); // 버튼 클릭 시 자동 슬라이딩 다시 시작
    });
    next.addEventListener("click", () => {
      scrollNext();
      startAutoScroll(); // 버튼 클릭 시 자동 슬라이딩 다시 시작
    });

    startAutoScroll(); // 페이지 로드 시 자동 슬라이딩 시작

    // ------------------ 슬라이더관련 스크립트코드 -------------------

    //전체 슬라이드 컨테이너 넓이 설정
    let currentSlide = 0;
    const totalSlides = document.querySelectorAll(".slides li").length;

    function moveSlide(slideNum) {
      const slideWidth = document.querySelector("#slideShow").clientWidth;
      const newLeft = slideNum * slideWidth;
      document.querySelector(
        ".slides"
      ).style.transform = `translateX(-${newLeft}px)`;
      currentSlide = slideNum;
    }

    prev.addEventListener("click", function () {
      if (currentSlide > 0) {
        moveSlide(currentSlide - 1);
      }
    });

    next.addEventListener("click", function () {
      if (currentSlide < totalSlides - 1) {
        moveSlide(currentSlide + 1);
      }
    });
    // ------------------ 슬라이더관련 스크립트코드 -------------------

    // ------------------ 자동 배너 코드 ---------------------------
    // 원본과 두 개의 복제본 생성
    let roller1 = document.querySelector(".rolling-list");
    roller1.id = "roller1"; // 아이디 부여

    let clone1 = roller1.cloneNode(true);
    clone1.id = "roller2";
    document.querySelector(".wrap").appendChild(clone1);

    let clone2 = roller1.cloneNode(true);
    clone2.id = "roller3";
    document.querySelector(".wrap").appendChild(clone2);

    let clone3 = roller1.cloneNode(true);
    clone3.id = "roller4";
    document.querySelector(".wrap").appendChild(clone3);

    // 모든 리스트에 대해 클래스 추가하여 애니메이션 시작
    document.querySelector("#roller1").classList.add("original");
    document.querySelector("#roller2").classList.add("clone");
    document.querySelector("#roller3").classList.add("clone");
    document.querySelector("#roller4").classList.add("clone");
    // ------------------ 자동 배너 코드 ---------------------------
    //  -------------------  토글관련 코드 -----------------------
    // JavaScript는 여기에 추가됩니다
    // JavaScript는 여기에 추가됩니다
    document.addEventListener("DOMContentLoaded", function () {
      var faqs = document.querySelectorAll(".faq-item");
      faqs.forEach(function (faq) {
        var questionButton = faq.querySelector(".faq-question");
        questionButton.addEventListener("click", function () {
          faq.classList.toggle("active");
          // 배경색 변경
          questionButton.style.backgroundColor = faq.classList.contains(
            "active"
          )
            ? "#F6F9FF"
            : "initial";
        });
      });
    });
  </script>

</body>

</html>